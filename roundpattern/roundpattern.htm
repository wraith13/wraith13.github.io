<html>
<!-- 🐕 -->
<title>draw round patterns</title>
<body style="margin:0px;overflow:hidden;">
<canvas id="canvas" width="4098" height="4098"></canvas>
<script>
var canvas = document.getElementById("canvas");
try {
    var arcBaseAngle = Math.PI /2.0;
    var context = canvas.getContext("2d");
    var rect =
    {
        "left": 0,
        "top": 0,
        "right": window.innerWidth,
        "bottom": window.innerHeight
    };
    var center =
    {
        "x": (rect.right -rect.left) /2.0,
        "y": (rect.bottom -rect.top) /2.0
    };
    var baseRadius = Math.min(center.x, center.y);
    var params = JSON.parse(decodeURI((location.href +"?params=null").split("?params=")[1]));
    if (params && params.backgroundColor) {
        canvas.style.backgroundColor = params.backgroundColor;
    }
    if (params && params.rounds && params.rounds.length) {
        for(var i = 0; i < params.rounds.length; ++i) {
            var round = params.rounds[i];
            var baseAngle = 0.0;
            if (round.baseAngle) {
                baseAngle = round.baseAngle;
            }
            var denominator = round.denominator || 0;
            if (round.fillStyle) {
                context.fillStyle = round.fillStyle;
            }
            context.beginPath();
            if (1 < denominator) {
                var isFirst = true;
                for(var index = 0; index < denominator; ++index) {
                    var prevAngle = ((index *1.0) /denominator) +baseAngle;
                    for(var j = 0; j < round.tracks.length; ++j) {
                        var track = round.tracks[j];
                        var radius = track.radius;
                        if (undefined === radius) {
                            radius = baseRadius *1.0;
                        }
                        var angleDelta = ((index *1.0) +track.angle) /denominator;
                        var currentAngle = (angleDelta +baseAngle)*(Math.PI *2);
                        if ("arc" == track.type)
                        {
                            context.arc(center.x, center.y, radius, arcBaseAngle -prevAngle, arcBaseAngle -currentAngle, true);
                        }
                        else
                        {
                            var x = center.x +(radius *Math.sin(currentAngle));
                            var y = center.y +(radius *Math.cos(currentAngle));
                            if (isFirst) {
                                isFirst = false;
                                context.moveTo(x, y);
                            } else {
                                context.lineTo(x, y);
                            }
                        }
                        prevAngle = currentAngle;
                    }
                }
            } else {
                var radius = round.tracks[0].radius || baseRadius *1.0;
                context.arc(center.x, center.y, radius, 0, Math.PI*2, false);
            }
            context.closePath();
            context.fill();
        }
    } else {
        canvas.remove();
        document.body.innerHTML = "<div style=padding:16px;>"
            +"<h1>how to use this page</h1>"
            +"<p>You can open this page with below params by a 'params' JSON argument.</p>"
            +"<ol>"
                +"<li>backgroundColor(optional)</li>"
                +"<li>rounds(array)"
                    +"<ol>"
                        +"<li>baseAngle(optional)</li>"
                        +"<li>denominator</li>"
                        +"<li>tracks(array)"
                            +"<ol>"
                                +"<li>type(first or arc or line)</li>"
                                +"<li>angle</li>"
                                +"<li>radius(optional)</li>"
                            +"</ol>"
                        +"</li>"
                        +"<li>fillStyle</li>"
                    +"</ol>"
                +"</li>"
            +"</ol>"
            +"<h2>sample links</h2>"
            +"<ol>"
            +"<li><A href='?params="
                +encodeURI(JSON.stringify(
                    {
                        "rounds":[
                            {
                                "denominator":3,
                                "tracks":[
                                    {
                                        "angle":0.0
                                    },
                                    {
                                        "angle":1.0
                                    }
                                ],
                                "fillStyle":"blue"
                            }
                        ]
                    }
                ))
                +"'>blue triangle</a></li>"
            +"<li><A href='?params="
                +encodeURI(JSON.stringify(
                    {
                        "backgroundColor": "#d6e685",
                        "rounds":[
                            {
                                "denominator":6,
                                "tracks":[
                                    {
                                        "angle":0.0,
                                        "radius":300
                                    },
                                    {
                                        "angle":1.0,
                                        "radius":300
                                    }
                                ],
                                "fillStyle":"#1e6823"
                            },
                            {
                                "denominator":6,
                                "tracks":[
                                    {
                                        "angle":0.0,
                                        "radius":276
                                    },
                                    {
                                        "angle":1.0,
                                        "radius":276
                                    }
                                ],
                                "fillStyle":"#FFFFFF"
                            }
                        ]
                    }
                ))
                +"'>green frame hexagon</a></li>"
                +"<li><A href='?params="
                +encodeURI(JSON.stringify(
                    {
                        "backgroundColor": "#FFFFFF",
                        "rounds":[
                            {
                                "baseAngle":3.0 / (13.0 *6.0),
                                "denominator":13,
                                "tracks":[
                                    {
                                        "angle":0.0 /6.0,
                                        "radius":300
                                    },
                                    {
                                        "angle":2.0 /6.0,
                                        "radius":300
                                    },
                                    {
                                        "angle":3.0 /6.0,
                                        "radius":250
                                    },
                                    {
                                        "angle":5.0 /6.0,
                                        "radius":250
                                    }
                                ],
                                "fillStyle":"#4488EE"
                            },
                            {
                                "baseAngle":3.0 / (13.0 *6.0),
                                "denominator":13,
                                "tracks":[
                                    {
                                        "angle":0.5 /6.0,
                                        "radius":276
                                    },
                                    {
                                        "angle":1.5 /6.0,
                                        "radius":276
                                    },
                                    {
                                        "angle":2.5 /6.0,
                                        "radius":226
                                    },
                                    {
                                        "angle":5.5 /6.0,
                                        "radius":226
                                    }
                                ],
                                "fillStyle":"#BBBBDD"
                            },
                            {
                                "denominator":0,
                                "tracks":[
                                    {
                                        "radius":100
                                    },
                                ],
                                "fillStyle":"#4488EE"
                            },
                            {
                                "denominator":0,
                                "tracks":[
                                    {
                                        "radius":76
                                    },
                                ],
                                "fillStyle":"#FFFFFF"
                            }
                        ]
                    }
                ))
                +"'>gear</a></li>"
                +"<li><A href='?params="
                +encodeURI(JSON.stringify(
                    {
                        "backgroundColor": "#F8F808",
                        "rounds":[
                            {
                                "baseAngle":3.0 / 12.0,
                                "denominator":3,
                                "tracks":[
                                    {
                                        "angle":0.0 / 2.0,
                                        "radius":300
                                    },
                                    {
                                        "type": "arc",
                                        "angle":1.0 /2.0,
                                        "radius":300
                                    },
                                    {
                                        "angle":1.0 /2.0,
                                        "radius":0.0
                                    }
                                ],
                                "fillStyle":"#080808"
                            },
                            {
                                "denominator":0,
                                "tracks":[
                                    {
                                        "radius":90
                                    },
                                ],
                                "fillStyle":"#F8F808"
                            },
                            {
                                "denominator":0,
                                "tracks":[
                                    {
                                        "radius":60
                                    },
                                ],
                                "fillStyle":"#080808"
                            }
                        ]
                    }
                ))
                +"'>radiation hazard symbol</a></li>"
            +"</ol>";
            +"</div>";
    }
} catch(Err) {
    canvas.remove();
    document.body.innerText = "🚫 Error : " +Err;
}
</script>
</body>
</html>