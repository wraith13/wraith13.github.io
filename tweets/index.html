<html>
<head>
<meta charset="utf-8">
<!--
The license of this file is Boost Software License, Version 1.0. ( Http://www.boost.org/LICENSE_1_0.txt ).
このファイルのライセンスは Boost Software License, Version 1.0. ( http://www.boost.org/LICENSE_1_0.txt ) とします。
-->
<title>Simple Tweets List</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@wraith13">
<meta name="twitter:title" content="tweets" id="twitter-card-title">
<meta name="twitter:description" content="simple tweets list">
<style>
@import url(https://fonts.googleapis.com/earlyaccess/notosansjapanese.css);
body, input, textarea, button
{
    font-size: 1.2em;
}
body
{
    margin: 0px;
    padding: 0px;
    background-color: #cce;
}
h1,
#form button
{
    color:#ddf;
    background-color:#55c;
}
h1
{
    font-family: 'Noto Sans Japanese', 'ヒラギノ角ゴ Pro W3', 'Hiragino Kaku Gothic Pro';
    font-weight: normal;
    text-align: center;
    margin: 0px;
}
body > *
{
    margin-left: auto;
    margin-right: auto;
}
#form,
#form input,
#form textarea,
#form button
{
    width:70vw;
    min-width:480px;
    max-width:100vw;
}
#form
{
    margin-top:1em;
}
#form input,
#form textarea,
#form button
{
    margin-bottom:1em;
    border-radius:0.2em;
    border-style:solid;
    border-color:#666;
}
#form textarea
{
    height:60vh;
    min-height:200px;
}
#form button
{
    border-radius:0.3em;
    font-size:1.5em;
}
</style>
</head>
<body>
<div id="form">
    title:<br>
    <input id="title" type="text" value="Simple Tweets List"><br>
    tweet id list:<br>
    <textarea id="tweets" placeholder="ツイートのURLあるいはIDを改行、スペース、カンマのいずれかで区切って入力してください。"></textarea><br>
    <button onclick='location.href=location.href+"?title="+encodeURIComponent(document.getElementById("title").value)+"&"+document.getElementById("tweets").value.split(/[\s,]/).map(function(i){return i.split("/").filter(function(i){return i !== i.replace(/\d/g,"")})[0];}).filter(function(i){return undefined !== i && 0 < i.length}).map(function(i){return encodeURIComponent(i);}).join(",");'>make!</button>
</div>
</body>
<script>
var basicUrlArgs = (location.href.split("#")[0] +"?")
    .split("?")[1]
    .split("&")
    .filter(function(i) { return 0 < i.length; });
if (0 < basicUrlArgs.length)
{
    var urlArgs = { title: "Simple Tweets List" };
    basicUrlArgs
        .filter(function(i) { return 0 < i.indexOf("="); })
        .forEach(
            function(i)
            {
                var index = i.indexOf("=");
                urlArgs[i.substr(0, index)] = decodeURIComponent(i.substr(index +1));
            }
        );
    var tweets = basicUrlArgs
        .filter(function(i) { return i.indexOf("=") < 0; })
        .map(function(i) { return decodeURIComponent(i);})
        .join(",")
        .split(",")
        .filter(function(i) { return 0 < i.length; });
    console.log(JSON.stringify(urlArgs));
    document.title = urlArgs.title;
    document.body.innerHTML = "<h1>" +urlArgs.title +"</h1>\r\n" +tweets.map(function(i) {
        return '<blockquote class="twitter-tweet" data-conversation="none"><a href="https://twitter.com/_/status/' +i +'"></a></blockquote>';
    }).join("\r\n");
}
</script>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</html>
